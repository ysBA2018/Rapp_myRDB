{% load static %}<!DOCTYPE html>
<html lang="de">

<head>
	{% block title %}<title>RechteDB f√ºr ZI-AI-BA</title>{% endblock %}

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Add additional CSS in static file -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/style.css' %}">

</head>

<body>
	<!-- Tiny script for pagination in filtered views  (https://djangopy.org/how-to/pagination-with-django/) -->
    {% block script %}
        <script>
            $(document).ready(function(){

              var skip_pages = 5; //change your number accordingly you want to show numbers

              var total_pages = {{pages.paginator.num_pages}};
              var current_page = {{pages.number}};
              var factor = Math.floor(current_page/skip_pages);

              $(".page_number").each(function(i, obj) {   //Showing the discrete numbers
                    var page = factor*(skip_pages) + i + 1;
                    if(current_page%skip_pages == 0)
                      page = (factor-1)*skip_pages + i + 1;
                    if(page - 1 < total_pages){
                      $(this).html(page);
                      existing = $(this).attr("href");
                      $(this).attr("href", "?page=" + page + existing);
                    }
                    else{
                      var x = i+1;
                      $('li[data=' + x + ']').css("display", "none");
                    }
              });
                var page = current_page%skip_pages;
                if(page == 0)
                  page = skip_pages;
                $('li[data=' + page + ']').each(function(){   //Deciding the active class
                  $('li[data=' + page + ']').addClass("active");
                });

              $(".skip_next").click(function(){   //Skip next ... Function
                  if(current_page%skip_pages == 0)
                    factor = factor-1;
                  var page = (factor+1)*skip_pages + 1;
                  existing = $(this).attr("href");
                  if(page < total_pages)
                    $(this).attr("href", "?page=" + page + existing);
                  else
                    $(this).attr("href", "?page=" + total_pages + existing);
              })
              $(".skip_prev").click(function(){ //Skip Previous ... Function
                  if(current_page%skip_pages == 0)
                    factor = factor-1;
                  var page = skip_pages*(factor-1) + 1;
                  existing = $(this).attr("href");
                  if(page > 0)
                    $(this).attr("href", "?page=" + page + existing);
                  else
                    $(this).attr("href", "?page=" + "1" + existing);
              })
            });
        </script>
    {% endblock script %}

  <div class="container-fluid">

	<div class="row">
	  <div class="col-xs-4 col-sm-4 col-md-3 col-lg-2 col-xl-2">
	  {% block sidebar %}
	  <ul class="sidebar-nav">
		  <li><a href="{% url 'home' %}">Startseite</a></li>
		  <li>&nbsp;</li>
		  <li><a href="{% url 'panel' %}?geloescht=3&userid_name__zi_organisation=ai-ba">Filteseite</a></li>

		  <li><a href="/admin">Admin-Sichten</a></li>
	      <li>&nbsp;</li>
		  <li><a href="{% url 'userliste' %}">User-Liste</a></li>
		  <li><a href="{% url 'teamliste' %}">Team-Liste</a></li>
		  <li><a href="{% url 'gesamtliste' %}">Gesamtliste</a></li>


		  {% if user.is_authenticated %}
		    <li>&nbsp;</li>
			<li>User: {{ user.get_username }}</li>
			<li><a href="{ % url 'logout' %}?next={{request.path}}">Logout</a></li>
		  {% else %}
			<li><a href="{ % url 'login' %}?next={{request.path}}">Login</a></li>
		  {% endif %}

	  </ul>
	 {% endblock %}
	  </div>
      <div class="container">
		  <div class="col-xs-8 col-sm-8 col-md-9 col-lg-10 col-xl-10">
			{% block content %}{% endblock %}
			  {% comment Altes, eigenes Paginieren%}
				{% block pagination %}
				  {% if is_paginated %}
					<div class="pagination col-12">
					  <div class="page-links ">
						{% if page_obj.has_previous %}
						  <a href="{{ request.path }}?page={{ page_obj.previous_page_number }}">previous</a>
						{% endif %}
						Page {{ page_obj.number }} von {{ page_obj.paginator.num_pages }}
						{% if page_obj.has_next %}
						  <a href="{{ request.path }}?page={{ page_obj.next_page_number }}">next</a>
						{% endif %}
					  </div>
					</div>
				  {% endif %}
				{% endblock pagination %}
			  {% endcomment %}
		  </div>
	  </div>
	</div>

  </div>

	{% comment %}
	{# Load the tag library for Bootstrap-4 #}
	{% load bootstrap4 %}

	{# Load CSS and JavaScript #}
	{% bootstrap_css %}
	{% bootstrap_javascript jquery='full' %}

	{# Display django.contrib.messages as Bootstrap alerts #}
	{% bootstrap_messages %}
	{% endcomment %}

</body>
</html>
